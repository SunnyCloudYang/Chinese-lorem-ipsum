(()=>{"use strict";function e(){return"undefined"!=typeof window}function t(){try{const e="production";if("development"===e||"test"===e)return"development"}catch(e){}return"production"}function n(){return"development"===((e()?window.vam:t())||"production")}function s(){return"development"===function(){try{const e="production";if("development"===e||"test"===e)return"development"}catch(e){}return"production"}()}var o="https://va.vercel-scripts.com/v1/speed-insights",d=`${o}/script.js`,c=`${o}/script.debug.js`;(function(s={debug:!0}){var o;if(!e())return;!function(e="auto"){window.vam="auto"!==e?e:t()}(s.mode),window.va||(window.va=function(...e){(window.vaq=window.vaq||[]).push(e)}),s.beforeSend&&(null==(o=window.va)||o.call(window,"beforeSend",s.beforeSend));const d=s.scriptSrc||(n()?"https://va.vercel-scripts.com/v1/script.debug.js":"/_vercel/insights/script.js");if(document.head.querySelector(`script[src*="${d}"]`))return;const c=document.createElement("script");c.src=d,c.defer=!0,c.dataset.sdkn="@vercel/analytics"+(s.framework?`/${s.framework}`:""),c.dataset.sdkv="1.3.1",s.disableAutoTrack&&(c.dataset.disableAutoTrack="1"),s.endpoint&&(c.dataset.endpoint=s.endpoint),s.dsn&&(c.dataset.dsn=s.dsn),c.onerror=()=>{const e=n()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${d}. ${e}`)},n()&&!1===s.debug&&(c.dataset.debug="false"),document.head.appendChild(c)})(),function(e={}){var t;if("undefined"==typeof window||null===e.route)return null;window.si||(window.si=function(...e){(window.siq=window.siq||[]).push(e)});const n=Boolean(e.dsn)?d:"/_vercel/speed-insights/script.js",o=e.scriptSrc||(s()?c:n);if(document.head.querySelector(`script[src*="${o}"]`))return null;e.beforeSend&&(null==(t=window.si)||t.call(window,"beforeSend",e.beforeSend));const a=document.createElement("script");a.src=o,a.defer=!0,a.dataset.sdkn="@vercel/speed-insights"+(e.framework?`/${e.framework}`:""),a.dataset.sdkv="1.0.12",e.sampleRate&&(a.dataset.sampleRate=e.sampleRate.toString()),e.route&&(a.dataset.route=e.route),e.endpoint&&(a.dataset.endpoint=e.endpoint),e.dsn&&(a.dataset.dsn=e.dsn),s()&&!1===e.debug&&(a.dataset.debug="false"),a.onerror=()=>{console.log(`[Vercel Speed Insights] Failed to load script from ${o}. Please check if any content blockers are enabled and try again.`)},document.head.appendChild(a)}();const a=document.querySelector(".theme-toggle"),r=document.getElementById("generate_btn"),l=document.getElementById("copy-button"),m=document.getElementById("result"),i=document.getElementById("exact_length");function u(e,t=!0){document.body.className=e,localStorage.setItem("theme",e),t&&y("主题切换为 "+("light-theme"===e?"浅色":"深色"))}function g(e,t){const[n,s]=t.map(Number);return!(isNaN(n)||isNaN(s)||n<1||s<1||n>s)}a.addEventListener("click",(function(){u("light-theme"===document.body.className?"dark-theme":"light-theme")})),r.addEventListener("click",(async function(){if(document.getElementById("loading_spinner").classList.contains("show"))return;document.getElementById("num_paragraphs_error").classList.remove("show"),document.getElementById("num_sentences_error").classList.remove("show"),document.getElementById("max_sentence_length_error").classList.remove("show"),document.getElementById("success_message").classList.remove("show"),document.getElementById("success_message").classList.remove("success"),document.getElementById("result").classList.remove("show"),document.getElementById("charCount").classList.remove("show"),document.getElementById("copy-button").classList.remove("show"),document.getElementById("loading_spinner").classList.add("show"),document.getElementById("generate_btn").classList.add("disabled"),document.getElementById("generate_btn").disabled=!0;const e=document.getElementById("num_paragraphs").value.split(/\D+/).map(Number),t=document.getElementById("num_sentences").value.split(/\D+/).map(Number),n=document.getElementById("max_sentence_length").value,s=document.getElementById("exact_length").value;if(s){if(isNaN(s)||s<1)return document.getElementById("exact_length_error").textContent="请输入一个有效的文本长度",document.getElementById("exact_length_error").classList.add("show"),document.getElementById("loading_spinner").classList.remove("show"),void document.getElementById("generate_btn").classList.remove("disabled");try{const e=await fetch(`/api/generate/${parseInt(s)}`,{method:"GET"});if(e.ok){const t=await e.json();document.getElementById("result").textContent=t.loremText,document.getElementById("success_message").textContent="文本生成成功！",document.getElementById("success_message").classList.add("success"),document.getElementById("charCount").textContent=`字数: ${t.loremText.length}`}else document.getElementById("success_message").textContent="生成文本时出错，请重试。"}catch(e){document.getElementById("success_message").textContent="无法连接到服务器，请检查您的网络连接。"}finally{document.getElementById("loading_spinner").classList.remove("show"),document.getElementById("success_message").classList.add("show"),document.getElementById("generate_btn").classList.remove("disabled"),document.getElementById("generate_btn").disabled=!1,document.getElementById("result").innerText&&(document.getElementById("result").classList.add("show"),document.getElementById("copy-button").classList.add("show"),document.getElementById("charCount").classList.add("show"))}return}let o=!0;if(g(0,e)||(document.getElementById("num_paragraphs_error").textContent="请输入有效的段落数量范围 (例如: 3,5)",document.getElementById("num_paragraphs_error").classList.add("show"),o=!1),g(0,t)||(document.getElementById("num_sentences_error").textContent="请输入有效的句子数量范围 (例如: 4,8)",document.getElementById("num_sentences_error").classList.add("show"),o=!1),(isNaN(n)||n<5||n>50)&&(document.getElementById("max_sentence_length_error").textContent="请输入一个有效的句子长度 (最小为 5，不超过 50)",document.getElementById("max_sentence_length_error").classList.add("show"),o=!1),!o)return document.getElementById("loading_spinner").classList.remove("show"),void document.getElementById("generate_btn").classList.remove("disabled");try{const s=await fetch("/api/generate/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({num_paragraphs_range:e,num_sentences_range:t,max_sentence_length:parseInt(n)})});if(s.ok){const e=await s.json();document.getElementById("result").textContent=e.loremText,document.getElementById("success_message").textContent="文本生成成功！",document.getElementById("success_message").classList.add("success"),document.getElementById("charCount").textContent=`字数: ${e.loremText.length}`}else document.getElementById("success_message").textContent="生成文本时出错，请重试。"}catch(e){document.getElementById("success_message").textContent="无法连接到服务器，请检查您的网络连接。"}finally{document.getElementById("loading_spinner").classList.remove("show"),document.getElementById("success_message").classList.add("show"),document.getElementById("generate_btn").classList.remove("disabled"),document.getElementById("generate_btn").disabled=!1,document.getElementById("result").innerText&&(document.getElementById("result").classList.add("show"),document.getElementById("copy-button").classList.add("show"),document.getElementById("charCount").classList.add("show"))}})),l.addEventListener("click",(function(){const e=document.getElementById("result");e.innerText&&navigator.clipboard.writeText(e.innerText).then((()=>{y("文本复制成功！")}))})),m.addEventListener("click",(function(){const e=document.getElementById("result");e.setAttribute("contenteditable","true"),e.focus(),e.oninput=function(){document.getElementById("charCount").textContent=`字数: ${e.innerText.length}`}})),i.addEventListener("input",(function(){i.value?(document.getElementById("num_paragraphs").disabled=!0,document.getElementById("num_sentences").disabled=!0,document.getElementById("max_sentence_length").disabled=!0):(document.getElementById("num_paragraphs").disabled=!1,document.getElementById("num_sentences").disabled=!1,document.getElementById("max_sentence_length").disabled=!1)})),document.addEventListener("DOMContentLoaded",(function(){const e=localStorage.getItem("theme");u(e||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark-theme":"light-theme"),!1)}));const h=document.getElementById("text-background");function y(e){const t=document.querySelector(".toast");document.getElementById("toast-message").textContent=e,t.classList.add("show"),setTimeout((()=>{document.querySelector(".toast").classList.remove("show")}),3e3)}window.onload=function(){try{fetch("/api/generate/").then((e=>{e.ok?(console.log("Connected to the server"),e.json().then((e=>{let t=e.loremText;for(h.textContent=t;h.clientHeight>=h.scrollHeight;)t+=e.loremText,h.textContent=t;h.textContent="",h.classList.add("show"),new Typed("#text-background",{strings:[t],loop:!1,showCursor:!1})}))):console.error("Failed to connect to the server")}))}catch(e){console.error("Failed to connect to the server")}},window.onresize=function(){for(;h.clientHeight>=h.scrollHeight&&h.textContent;)h.textContent=h.textContent+h.textContent}})();